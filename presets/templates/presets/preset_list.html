{% extends "base.html" %}

{% block content %}
    <div class="grid mb-1">
        <h1 style="margin-bottom: 0;">All Available Presets</h1>
        <div style="text-align: right;">
            <a href="{% url 'preset-create' %}" role="button">Create a New Preset</a>
        </div>
    </div>

    <h2 class="featured-header" id="featured-header" {% if not featured_presets %}style="display: none;"{% endif %}>Featured Presets</h2>
    
    <div class="card-grid" id="featured-grid">
        {% for preset in featured_presets %}
            {% include "presets/_preset_card.html" %}
        {% endfor %}
    </div>

    <h2 class="favorites-header" id="favorites-header" {% if not favorited_presets %}style="display: none;"{% endif %}>My Favorites</h2>

    <div class="card-grid" id="favorites-grid">
        {% for preset in favorited_presets %}
            {% include "presets/_preset_card.html" %}
        {% endfor %}
    </div>

    <hr id="presets-hr" {% if not favorited_presets and not featured_presets %}style="display: none;"{% endif %}>

    <form method="get" class="filter-bar">
        <input 
            type="search" 
            id="search"
            name="q" 
            placeholder="Search all presets..." 
            value="{{ search_query }}"
        >
        <select name="sort" id="sort" onchange="this.form.submit()">
            <option value="-count" {% if current_sort == "-count" %}selected{% endif %}>Sort: Popularity</option>
            <option value="name" {% if current_sort == "name" %}selected{% endif %}>Sort: Alphabetical</option>
            <option value="creator" {% if current_sort == "creator" %}selected{% endif %}>Sort: Creator</option>
        </select>
    </form>

    <div class="card-grid" id="regular-grid">
        {% for preset in presets %}
            {% include "presets/_preset_card.html" %}
        {% endfor %}
    </div>
{% endblock %}